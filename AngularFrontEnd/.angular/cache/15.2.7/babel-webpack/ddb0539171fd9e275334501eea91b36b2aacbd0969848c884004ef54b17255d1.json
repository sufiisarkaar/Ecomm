{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ContentComponent = class ContentComponent {\n  constructor(IS, userS, toas) {\n    this.IS = IS;\n    this.userS = userS;\n    this.toas = toas;\n  }\n  ngOnInit() {\n    this.getItems();\n  }\n  getItems() {\n    this.IS.getItems().subscribe(res => {\n      this.itemList = res.Result;\n    });\n  }\n  AddToCart(item) {\n    // Call API to add item to cart if user is logged in\n    let user = localStorage.getItem(\"user\");\n    let user_id = user && JSON.parse(user).data.id;\n    let addData = {\n      ...item,\n      user_id\n    };\n    if (user) {\n      this.IS.addToCart(addData).subscribe(() => {\n        this.cartData();\n      });\n    }\n    if (!localStorage.getItem(\"user\")) {\n      // Retrieve existing data from LocalStorage or create a new empty array\n      let existingData = JSON.parse(localStorage.getItem(\"MyItems\") || \"[]\");\n      // Add the new object to the existing array\n      existingData.push(item);\n      // Save the updated array to LocalStorage\n      localStorage.setItem(\"MyItems\", JSON.stringify(existingData));\n      this.IS.cardData.emit(existingData);\n      this.IS.PendingdataAddedLocalToDb(item).subscribe(res => {});\n    }\n  }\n  cartData() {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    this.IS.getCartDataByUserID(userId).subscribe(res => {\n      this.IS.cardData.emit(res.data);\n    });\n  }\n};\nContentComponent = __decorate([Component({\n  selector: 'app-content',\n  templateUrl: './content.component.html',\n  styleUrls: ['./content.component.scss']\n})], ContentComponent);\nexport { ContentComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAS1C,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAK3BC,YAAoBC,EAAsB,EAAUC,KAAmB,EAAUC,IAAI;IAAjE,OAAE,GAAFF,EAAE;IAA8B,UAAK,GAALC,KAAK;IAAwB,SAAI,GAAJC,IAAI;EAAI;EAEzFC,QAAQ;IACN,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEAA,QAAQ;IACN,IAAI,CAACJ,EAAE,CAACI,QAAQ,EAAE,CAACC,SAAS,CAAEC,GAAQ,IAAI;MACxC,IAAI,CAACC,QAAQ,GAAGD,GAAG,CAACE,MAAM;IAC5B,CAAC,CAAC;EACJ;EAGAC,SAAS,CAACC,IAAS;IACjB;IACA,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvC,IAAIC,OAAO,GAAGH,IAAI,IAAII,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,CAACM,IAAI,CAACC,EAAE;IAC9C,IAAIC,OAAO,GAAG;MACZ,GAAGT,IAAI;MACPI;KACD;IACD,IAAIH,IAAI,EAAE;MACR,IAAI,CAACX,EAAE,CAACoB,SAAS,CAACD,OAAO,CAAC,CAACd,SAAS,CAAC,MAAK;QACxC,IAAI,CAACgB,QAAQ,EAAE;MAEjB,CAAC,CAAC;;IAEJ,IAAI,CAACT,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAE;MACjC;MACA,IAAIS,YAAY,GAAQP,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,IAAI,IAAI,CAAa;MAEvF;MACAS,YAAY,CAACC,IAAI,CAACb,IAAI,CAAC;MAEvB;MACAE,YAAY,CAACY,OAAO,CAAC,SAAS,EAAET,IAAI,CAACU,SAAS,CAACH,YAAY,CAAC,CAAC;MAC7D,IAAI,CAACtB,EAAE,CAAC0B,QAAQ,CAACC,IAAI,CAACL,YAAY,CAAC;MAEnC,IAAI,CAACtB,EAAE,CAAC4B,yBAAyB,CAAClB,IAAI,CAAC,CAACL,SAAS,CAAEC,GAAQ,IAAI,CAE/D,CAAC,CAAC;;EAEN;EAKAe,QAAQ;IACN,IAAIV,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvC,IAAIgB,MAAM,GAAGlB,IAAI,IAAII,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,CAACM,IAAI,CAACC,EAAE;IAC7C,IAAI,CAAClB,EAAE,CAAC8B,mBAAmB,CAACD,MAAM,CAAC,CAACxB,SAAS,CAAEC,GAAQ,IAAI;MACzD,IAAI,CAACN,EAAE,CAAC0B,QAAQ,CAACC,IAAI,CAACrB,GAAG,CAACW,IAAI,CAAC;IACjC,CAAC,CAAC;EACJ;CAGD;AA7DYnB,gBAAgB,eAL5BD,SAAS,CAAC;EACTkC,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE,0BAA0B;EACvCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,GACWnC,gBAAgB,CA6D5B;SA7DYA,gBAAgB","names":["Component","ContentComponent","constructor","IS","userS","toas","ngOnInit","getItems","subscribe","res","itemList","Result","AddToCart","item","user","localStorage","getItem","user_id","JSON","parse","data","id","addData","addToCart","cartData","existingData","push","setItem","stringify","cardData","emit","PendingdataAddedLocalToDb","userId","getCartDataByUserID","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\PILR\\Desktop\\AngularWithLaravelAPI\\AngularFrontEnd\\src\\app\\components\\content\\content.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ItemServiceService } from 'src/app/services/item-service.service';\nimport { UsersService } from 'src/app/services/users.service';\n\n@Component({\n  selector: 'app-content',\n  templateUrl: './content.component.html',\n  styleUrls: ['./content.component.scss']\n})\nexport class ContentComponent implements OnInit {\n\n  itemList: any;\n  IsLogin: any;\n\n  constructor(private IS: ItemServiceService, private userS: UsersService, private toas) { }\n\n  ngOnInit() {\n    this.getItems();\n  }\n\n  getItems() {\n    this.IS.getItems().subscribe((res: any) => {\n      this.itemList = res.Result;\n    })\n  }\n\n\n  AddToCart(item: any) {\n    // Call API to add item to cart if user is logged in\n    let user = localStorage.getItem(\"user\")\n    let user_id = user && JSON.parse(user).data.id;\n    let addData = {\n      ...item,\n      user_id\n    }\n    if (user) {\n      this.IS.addToCart(addData).subscribe(() => {\n        this.cartData();\n\n      });\n    }\n    if (!localStorage.getItem(\"user\")) {\n      // Retrieve existing data from LocalStorage or create a new empty array\n      let existingData: any = JSON.parse(localStorage.getItem(\"MyItems\") || \"[]\") as string[];\n\n      // Add the new object to the existing array\n      existingData.push(item);\n\n      // Save the updated array to LocalStorage\n      localStorage.setItem(\"MyItems\", JSON.stringify(existingData));\n      this.IS.cardData.emit(existingData)\n\n      this.IS.PendingdataAddedLocalToDb(item).subscribe((res: any) => {\n\n      })\n    }\n  }\n\n\n\n\n  cartData() {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    this.IS.getCartDataByUserID(userId).subscribe((res: any) => {\n      this.IS.cardData.emit(res.data);\n    })\n  }\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}